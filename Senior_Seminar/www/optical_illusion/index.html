<!DOCTYPE html>
<html>
    <head>
        <title>Sara's Homepage</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css"/>
        <script type="text/javascript" src="js/style.js"></script>
    </head>
    <body>
        <div class="wrapper">
            <div class="container">
                <div class="row banner">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-sm-12">
                        <a id="home" href="../"><button type="button" class="btn btn-primary-outline">Home</button></a>
                        <h1>Optical Illusions</h1>
                        <input id="leaning-tower" type=button value="Leaning Tower" onclick="getLeaningTower()">
                        <input id="sine-illusion" type=button value="Sine Illusion" onclick="getSineIllusion()">
                    </div>
                </div>

                <div class="row content">
                    <div class="col-md-12 col-sm-12 col-sm-12 col-lg-12 content-wrapper">
                        <div class='viz' id="content-leaning-tower">
                            <canvas id="canvas1" width = "700" height="500"></canvas>
                            
                            <form>
                                <input type=button value="Start animation" onclick="animate1()">
                                <input type=button value="Clear animation" onclick="clearAnimate()">
                            </form>
                            
                            <div class="explanation">
                                <b>Illusion: </b>Two towers do not seem to be parallel, as the one on the right side slightly leans to the right.
                                <br>
                                <b>Animation Explanation: </b>The green parallelogram along with a blue right triangle show that two leaning towers are actually parallel to each other.
                                <br>
                                <a href="http://www.michaelbach.de/ot/sze-leaningTowers/index.html"class="source"><b>Read Source</b></a>
                            </div>
                        </div>
                        
                        <div class='viz' id="content-sine-illusion">
                            <canvas id="canvas2" width = "700" height="500"></canvas>
                            <form>
                                <input type=button value="Start animation" onclick="animate2()">
                                <input type=button value="Clear animation" onclick="clearAnimate()">
                            </form>
                            <div class="explanation">
                                <b>Illusion: </b>Not all the vertical bars seem like they have the same length.
                                <br>
                                <b>Animation Explanation: </b>Draw eight blue lines right next to eight vertical bars chosen in the graph such that blue lines have the same lengths as the chosen bars. Moving blue lines to the vertical center shows that all the bars have the same length.
                                <br>
                                <a href="http://www.michaelbach.de/ot/sze-sineIllusion/index.html"class="source"><b>Read Source</b></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row note">
                <div class="col-lg-12 col-md-12 col-sm-12 col-sm-12">
                    <p id="update">Last updated: </p>
                </div>
            </div>
        </div>
        
        
        <script>
        // load the image
        var img1 = new Image();
        img1.src = "images/LeaningTower.jpg";
        
        var img2 = new Image();
        img2.src = "images/SineIllusion.jpg";
        
        var canvas1 = document.getElementById ("canvas1");
        var canvas2 = document.getElementById ("canvas2");
        var context1 = canvas1.getContext ("2d");
        var context2 = canvas2.getContext ("2d");
        var x = 460;    // x position for canvas1
        var y1 = 20;    // y positions for canvas2
        var y2 = 220;
        var y3 = 420;
        var myTimer;    // used to stop animation
        
        var leaningTower = document.getElementById("content-leaning-tower");
        var sineIllusion = document.getElementById("content-sine-illusion");

        // draw the initial illusion when page is loaded
        window.onload = function() {
            clearStuff();
        }
        
        // do the animation when button is pressed
        function animate1() {
            // setInterval (function_to_animate, delay between frames)
            myTimer = setInterval (drawStuff1, 100);
        }
        
        function drawStuff1() {
            clearStuff();
            //context.globalAlpha=0.2;
            // do in clockwise order
            context1.fillStyle = "rgba(0, 256, 0, 0.5)";
            context1.beginPath();
            context1.moveTo (x, 136);
            context1.lineTo (x+247, 136);
            context1.lineTo (x+144, 386);
            context1.lineTo (x-103, 386);                
            context1.closePath();
            context1.fill();
            
            context1.fillStyle = "rgba(0, 0, 256, 0.5)";
            context1.beginPath();
            context1.moveTo (x+258, 136);
            context1.lineTo (x+258, 386);
            context1.lineTo (x+155, 386);                
            context1.closePath();
            context1.fill();
            
            context1.fillStyle = "rgba(0, 0, 256, 1)";
            context1.beginPath();
            context1.moveTo (x+143, 136);
            context1.lineTo (x+145, 136);
            context1.lineTo (x+145, 386);                
            context1.lineTo (x+143, 386);                
            context1.closePath();
            context1.fill();
            
            context1.fillStyle = "rgba(0, 0, 256, 1)";
            context1.beginPath();
            context1.moveTo (x-1, 136);
            context1.lineTo (x+1, 136);
            context1.lineTo (x+1, 386);                
            context1.lineTo (x-1, 386);                
            context1.closePath();
            context1.fill();
            
            x = x - 10;
            if (x < 191) {
                clearInterval (myTimer);
            }
        }
        
        // do the animation when button is pressed
        function animate2() {
            // setInterval (function_to_animate, delay between frames)
            myTimer = setInterval (drawStuff2, 175);
        }
        
        function drawStuff2() {
            clearStuff();
            
            context2.fillStyle = "rgba(0, 0, 256, 0.5)";
            context2.beginPath();
            context2.moveTo (622, y2);
            context2.lineTo (619, y2);
            context2.lineTo (619, y2+60);                
            context2.lineTo (622, y2+60);                
            context2.closePath();
            context2.fill();
            
            context2.beginPath();
            context2.moveTo (550, y1);
            context2.lineTo (553, y1);
            context2.lineTo (553, y1+60);                
            context2.lineTo (550, y1+60);                
            context2.closePath();
            context2.fill();
            
            context2.beginPath();
            context2.moveTo (478, y2);
            context2.lineTo (475, y2);
            context2.lineTo (475, y2+60);                
            context2.lineTo (478, y2+60);                
            context2.closePath();
            context2.fill();
            
            context2.beginPath();
            context2.moveTo (406, y3);
            context2.lineTo (403, y3);
            context2.lineTo (403, y3+60);                
            context2.lineTo (406, y3+60);                
            context2.closePath();
            context2.fill();
            
            context2.beginPath();
            context2.moveTo (334, y2);
            context2.lineTo (331, y2);
            context2.lineTo (331, y2+60);                
            context2.lineTo (334, y2+60);                
            context2.closePath();
            context2.fill();
            
            context2.beginPath();
            context2.moveTo (262, y1);
            context2.lineTo (259, y1);
            context2.lineTo (259, y1+60);                
            context2.lineTo (262, y1+60);                
            context2.closePath();
            context2.fill();
            
            context2.beginPath();
            context2.moveTo (190, y2);
            context2.lineTo (187, y2);
            context2.lineTo (187, y2+60);                
            context2.lineTo (190, y2+60);                
            context2.closePath();
            context2.fill();
            
            context2.beginPath();
            context2.moveTo (118, y3);
            context2.lineTo (115, y3);
            context2.lineTo (115, y3+60);                
            context2.lineTo (118, y3+60);                
            context2.closePath();
            context2.fill();
            
            y1 += 10;
            y3 -= 10;
            if (y1 > y2 && y3 < y2) {
                context2.strokeStyle = "rgba(256, 0, 0, 1)";
                context2.strokeRect(0, y2, 700, 60);
                clearInterval (myTimer);
            }
        }
        
        function clearStuff() {
            context1.clearRect (0, 0, 700, 500);
            //context1.drawImage (img1, 40, 50);
            context1.drawImage (img1, 90, 100);
            context1.font="26px Helvetica";
            context1.fillStyle = "rgba(0, 0, 0, 1)";
            context1.fillText ("Leaning Tower", 350, 40);
            
            context2.clearRect (0, 0, 700, 500);
            context2.drawImage (img2, 30, 10);
            context2.font="26px Helvetica";
            context2.fillStyle = "rgba(0, 0, 0, 1)";
            context2.fillText ("Sine Illusion", 350, 40); 
        }
        
        function clearAnimate() {
            x = 460;
            y1 = 20;
            y2 = 220;
            y3 = 420;
            clearInterval (myTimer);
            clearStuff();
        }
        
        function getLeaningTower() {
            clearAnimate();
            leaningTower.style.display = "block";
            sineIllusion.style.display = "none";
        }
        
        function getSineIllusion() {
            clearAnimate();
            sineIllusion.style.display = "block";
            leaningTower.style.display = "none";
        }
        
        $("#update").append(document.lastModified);
    </script>


    </body>
</html>